
import gtk
from glycogen.pathway.learningpathway import LearningPathway

class PathwayDisplay(gtk.VBox):
    """ Displays a single learning pathway as a pygtk widget """
    
    def __init__(self):
        gtk.VBox.__init__(self, False, 0)
        
        self._namebox = gtk.Label("pathway name")  #TODO replace with text entry
        self.pack_start(self._namebox, False, False, 0)
        self._namebox.show()
        
        self._pathwaybox = gtk.HBox(False, 0)
        self.pack_start(self._pathwaybox, True, True, 0)
        self._pathwaybox.show()
        
        
        
        #FIXME this is a test pathway, remove after testing
        pathway = LearningPathway()
        self.show_pathway(pathway)
        

        #self.show_pathway(None)  #clear the display
        
        self.show()
    
    
    def _build_start_node(self):
        start_node = gtk.Button("start")
        start_node.show()
        return start_node
        
    def _build_end_node(self):
        end_node = gtk.Button("end")
        end_node.show()
        return end_node
    
    #TODO method to display pathway by id - retrieve pathway from repository
    
    def show_pathway(self, pathway):
        """ Displays the given pathway in this PathwayDisplay """
        
        for child in self._pathwaybox.get_children():
            self._pathwaybox.remove(child)
        
        if pathway is None:
            self._namebox.set_text("no pathway")
            return
        
        self._namebox.set_text(pathway.get_name())
        
        self._pathwaybox.pack_start(self._build_start_node(), False, False, 0)
        self._pathwaybox.pack_end(self._build_end_node(), False, False, 0)
        
        #TODO show pathway nodes
        
        
    
