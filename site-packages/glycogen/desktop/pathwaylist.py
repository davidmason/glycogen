
import gtk
from glycogen.pathway import pathwayrepo

class PathwayList(gtk.TreeView):
    """ Responsible for retrieving and displaying all available learning
    pathways.
    
    use update() to refresh the list
    
    """

    def __init__(self):
        # make a new list
        
        self.listmodel = gtk.ListStore(str)
        #TODO add column to store pathway id...
        
        gtk.TreeView.__init__(self, self.listmodel)
        
        self.column = gtk.TreeViewColumn('Pathway')
        self.append_column(self.column)
        self.cell = gtk.CellRendererText()
        self.column.pack_start(self.cell, True)
        self.column.add_attribute(self.cell, 'text', 0)
        
        self.update()
        
        self.show()
        
    def update(self):
        repository = pathwayrepo.get_global_repository()
        pathways = repository.get_pathways()

        self.listmodel.clear()
        for pathway in pathways:
            self.listmodel.append([pathway.get_name()])
        
        
        
if __name__ == '__main__':
    thing = PathwayList()
    
    
