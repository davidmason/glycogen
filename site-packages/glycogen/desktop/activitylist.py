
import logging
import gtk
import gobject
from jarabe.model import bundleregistry
from jarabe.model import shell
from sugar.datastore import datastore
from glycogen.challenge import challrepo
from glycogen.challenge.challrepo import Challenge
from jarabe.model import bundleregistry

_logger = logging.getLogger('FavoritesView')

logging.debug('GLYCOGEN: loading ChallBox')


class ActivityList(gtk.TreeView):
    """ Responsible for retrieving and displaying all available activities """

    def __init__(self):
        
        self.listmodel = gtk.ListStore(str)
        #TODO add columns to store more than just bundle id
        
        gtk.TreeView.__init__(self, self.listmodel)
        
        self.column = gtk.TreeViewColumn('Activity')
        self.append_column(self.column)
        self.cell = gtk.CellRendererText()
        self.column.pack_start(self.cell, True)
        self.column.add_attribute(self.cell, 'text', 0)
        #TODO display activity by name
        
        self.update()
        
        self.show()
    
    def update(self):
        self.listmodel.clear()
        registry = bundleregistry.get_registry()
        for info in registry:
            self.listmodel.append([info.get_bundle_id()])
        
        
        
if __name__ == '__main__':
    thing = ActivityList()
